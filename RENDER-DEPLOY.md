# üöÄ Deploy Shifa AlHind to Render

Complete guide for deploying the Shifa AlHind medical tourism platform to Render.

---

## ‚úÖ Prerequisites

- ‚úÖ Code pushed to GitHub: `git@github.com:imrejaul007/shifa.git`
- ‚úÖ `render.yaml` configuration file (included in repository)
- ‚úÖ Render account (sign up at https://render.com)

---

## üéØ Quick Deploy (5 minutes)

### Step 1: Connect to Render

1. Go to https://dashboard.render.com
2. Sign up or login (can use GitHub account)
3. Click **"New +"** ‚Üí **"Blueprint"**

### Step 2: Connect Your Repository

1. Click **"Connect a repository"**
2. Authorize Render to access GitHub
3. Select your repository: **`imrejaul007/shifa`**
4. Click **"Connect"**

### Step 3: Configure (Render reads from render.yaml)

Render will automatically detect the `render.yaml` file and create:

- ‚úÖ PostgreSQL Database: `shifa-alhind-db`
- ‚úÖ Web Service: `shifa-alhind`

**You need to manually set these environment variables:**

Click on the web service ‚Üí **Environment** ‚Üí Add:

```env
NEXTAUTH_URL=https://shifa-alhind.onrender.com
NEXT_PUBLIC_APP_URL=https://shifa-alhind.onrender.com
```

_(The other variables are auto-configured from render.yaml)_

### Step 4: Deploy

1. Click **"Apply"** or **"Create Blueprint"**
2. Wait for:
   - Database creation (~2 minutes)
   - Build process (~5-10 minutes)
   - Deployment

### Step 5: Initialize Database

Once deployed, you need to run migrations:

1. Go to your web service dashboard
2. Click **"Shell"** tab
3. Run these commands:

```bash
# Push database schema
npx prisma db push

# Seed with sample data
npm run db:seed
```

**Output should show:**

```
‚úÖ Database seeded successfully
- 3 hospitals created
- 3 doctors created
- 4 treatments created
- 2 packages created
- 3 blog posts created
```

---

## üåê Access Your Deployed App

**Your app will be available at:**

```
https://shifa-alhind.onrender.com
```

**Public Pages:**

- Home (EN): https://shifa-alhind.onrender.com/en
- Home (AR): https://shifa-alhind.onrender.com/ar
- Treatments: https://shifa-alhind.onrender.com/en/treatments
- Doctors: https://shifa-alhind.onrender.com/en/doctors
- Hospitals: https://shifa-alhind.onrender.com/en/hospitals

**Admin Panel:**

- Login: https://shifa-alhind.onrender.com/admin/login

**Default Admin Credentials:**

```
Email: admin@shifaalhind.com
Password: admin123
```

‚ö†Ô∏è **IMPORTANT: Change these credentials after first login!**

---

## üîß Configuration Details

### Automatic Configuration (from render.yaml)

‚úÖ **Database:**

- Type: PostgreSQL
- Plan: Free (512 MB RAM, 1 GB Storage)
- Name: `shifa-alhind-db`
- Auto-expires after 90 days of inactivity (free plan)

‚úÖ **Web Service:**

- Type: Node.js
- Plan: Free (512 MB RAM, automatic sleep after 15 min inactivity)
- Build: `npm install && npx prisma generate && npm run build`
- Start: `npm start`
- Auto-deploy on git push to `main` branch

‚úÖ **Environment Variables (Auto-configured):**

- `NODE_ENV=production`
- `DATABASE_URL` (from database)
- `NEXTAUTH_SECRET` (auto-generated)
- `NEXT_PUBLIC_APP_NAME=Shifa AlHind`

‚ö†Ô∏è **Manual Configuration Required:**

- `NEXTAUTH_URL` - Set to your Render URL
- `NEXT_PUBLIC_APP_URL` - Set to your Render URL

---

## üìù Custom Domain (Optional)

### Add Your Own Domain

1. Go to web service **Settings**
2. Scroll to **Custom Domain**
3. Click **"Add Custom Domain"**
4. Enter your domain: `shifaalhind.com`
5. Add DNS records to your domain registrar:

```
Type: CNAME
Name: www
Value: shifa-alhind.onrender.com

Type: A
Name: @
Value: (Render will provide IP)
```

6. Wait for DNS propagation (5-60 minutes)
7. SSL certificate auto-generated by Render

### Update Environment Variables for Custom Domain

```env
NEXTAUTH_URL=https://shifaalhind.com
NEXT_PUBLIC_APP_URL=https://shifaalhind.com
```

---

## üîÑ Continuous Deployment

**Automatic deployments are enabled!**

Every time you push to the `main` branch:

1. Render detects the change
2. Runs build process
3. Deploys automatically
4. Zero downtime deployment

```bash
# Make changes locally
git add .
git commit -m "Update feature"
git push origin main

# Render automatically deploys!
```

---

## üìä Monitoring & Logs

### View Logs

1. Go to your web service dashboard
2. Click **"Logs"** tab
3. See real-time application logs

### Monitor Performance

1. Click **"Metrics"** tab
2. View:
   - CPU usage
   - Memory usage
   - Response times
   - Request count

---

## ‚öôÔ∏è Upgrade Plans

### Free Plan Limitations:

- 512 MB RAM
- Automatic sleep after 15 min inactivity
- Cold start (~30 seconds on first request)
- Database expires after 90 days inactivity

### Recommended Upgrades for Production:

**Starter Plan ($7/month per service):**

- 512 MB RAM (always on)
- No sleep
- No cold starts
- Database doesn't expire

**Standard Plan ($25/month per service):**

- 2 GB RAM
- Better performance
- Priority support

---

## üõ†Ô∏è Troubleshooting

### Build Fails

**Error: "Failed to build"**

Solution:

```bash
# Check build logs in Render dashboard
# Common fixes:

# 1. Clear build cache
# Settings ‚Üí "Clear build cache & deploy"

# 2. Update Node version in package.json:
{
  "engines": {
    "node": ">=18.0.0"
  }
}
```

### Database Connection Error

**Error: "Can't reach database server"**

Solution:

1. Check `DATABASE_URL` environment variable
2. Ensure database is running (check database dashboard)
3. Wait 2-3 minutes after database creation

### Application Not Loading

**Error: "Application failed to respond"**

Solution:

1. Check logs for errors
2. Verify build completed successfully
3. Ensure `npm start` command works locally
4. Check if database migrations ran

### Cold Start Issues (Free Plan)

**Solution:** Upgrade to Starter plan ($7/month) to eliminate cold starts

---

## üîê Security Checklist

Before going live:

- [ ] Change default admin password
- [ ] Set strong `NEXTAUTH_SECRET`
- [ ] Enable HTTPS (automatic on Render)
- [ ] Add custom domain with SSL
- [ ] Review environment variables
- [ ] Set up database backups

---

## üíæ Database Backups

### Manual Backup

1. Go to database dashboard
2. Click **"Backups"**
3. Click **"Create Backup"**

### Automated Backups (Paid Plans)

Available on Standard plan and above:

- Daily automatic backups
- Point-in-time recovery
- Backup retention

---

## üìà Scaling Strategy

### Stage 1: Free Plan (Testing)

- Good for development and testing
- ~100 requests/day
- Sleeps after 15 minutes

### Stage 2: Starter Plan (Launch)

- Always on
- ~1,000 requests/day
- Good for initial launch

### Stage 3: Standard Plan (Growth)

- 2 GB RAM
- ~10,000 requests/day
- Better performance

### Stage 4: Pro Plan (Scale)

- 4+ GB RAM
- Custom scaling
- Dedicated support

---

## üéØ Post-Deployment Tasks

### 1. Update Content

Use Admin CMS to:

- Replace sample hospitals with real data
- Add real doctor profiles
- Update treatment information
- Write blog posts

### 2. SEO Setup

1. Submit sitemap to Google:
   - URL: `https://shifa-alhind.onrender.com/sitemap.xml`
2. Set up Google Analytics
3. Verify with Google Search Console

### 3. Test Everything

- [ ] Test all public pages (EN/AR)
- [ ] Test admin login
- [ ] Test booking form submission
- [ ] Test language switcher
- [ ] Test on mobile devices
- [ ] Test all CRUD operations in admin

### 4. Monitor

- Check logs daily for errors
- Monitor response times
- Track form submissions
- Review analytics

---

## üìû Support

**Render Support:**

- Documentation: https://render.com/docs
- Community: https://community.render.com
- Support: support@render.com

**Platform Documentation:**

- Setup Guide: [SETUP.md](./SETUP.md)
- Launch Checklist: [LAUNCH-CHECKLIST.md](./LAUNCH-CHECKLIST.md)
- Admin CMS Guide: [ADMIN-CMS-COMPLETE.md](./ADMIN-CMS-COMPLETE.md)

---

## ‚úÖ Success!

**Your Shifa AlHind platform is now deployed on Render!** üéâ

Next steps:

1. Add real content via Admin CMS
2. Set up custom domain
3. Configure SEO and analytics
4. Launch marketing campaigns

**Live URL:** https://shifa-alhind.onrender.com

---

**Last Updated:** October 9, 2025
**Deployment Platform:** Render
**App Version:** 1.0.0
